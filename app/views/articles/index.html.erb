<p id="notice"><%= notice %></p>

<h1>Articles</h1>

<div id="articles" class="container-fluid">
  <% (0..(@articles.length/3)).each do |row| %>
    <%= content_tag :div, class: "row" do -%>
      <% x, y = row*3, (row*3)+2 %>
      <% @articles[x..y].each do |article| %>
        <div id="article-outline" class="col-md-4">
          <div id="site-name">
            <a href="<%= article.link %>" target="_blank"><span class="bade badge-secondary badge-pill"><%= "Visit article at #{URI.parse(article.link).host.downcase}" %></span></a>
          </div>
          <div id="article-heading-outline">
            <h6 class="article-heading"><%= article.title %></h6>
          </div>
          <div id="article-image-outline">
            <% if !article.image.blank? %>
              <a href="<%= article_path(article.id) %>"><%= image_tag article.image, class: "img-fluid rounded mx-auto d-block", height: "200px", width: "300px" %></a>
            <% end %>
          </div>
          <div id="article-tags-outline" class="form-inline">
            <% article.tags.each do |tag| %>
              <span><%= link_to "#{tag}", {controller: "articles", action: "index", tag: tag}, class: "article-tag badge badge-primary" %></span>
            <% end %>

            <!-- Eventually make this a badge that adds a tag to the article via AJAX -->
            <% if article_owner?(article) %>
              <% form_for article, url: articles_path, method: "get" do |form| %>
              <% end %>
            <% end %>
          </div>
          <span><%= link_to 'Show', article %></span> |
          <span><%= link_to 'Edit', edit_article_path(article) if article_owner?(article) %></span> |
          <span><%= link_to 'Destroy', article, method: :delete, data: { confirm: 'Are you sure?' } if article_owner?(article) %></span>
        </div>
      <% end %>
    <% end -%>
  <% end %>
</div>

<br>

<%= link_to 'New Article', new_article_path %>

<style>

  .article-heading {
    text-align: center;
    border-bottom-style: dotted;
    border-bottom-color: rgba(150, 150, 150, 1);
  }

  .article-image {
    position: relative;
  }

  #article-outline {
    border-radius: 4px;
    border-style: solid;
    border-width: 1px;
    border-color: rgba(150, 150, 150, .6);
  }

  #article-heading-outline {
    margin-top: 6px;
  }

</style>
